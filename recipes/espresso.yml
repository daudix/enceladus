---
# yaml-language-server: $schema=https://schema.blue-build.org/recipe-v1.json
name: enceladus
description: My personal modification of uCore.

alt-tags:
  - espresso
  - server
base-image: ghcr.io/ublue-os/ucore-minimal
image-version: stable

modules:
  - type: dnf
    repos:
      cleanup: true
      files:
        - https://pkg.cloudflareclient.com/cloudflare-warp-ascii.repo
        - https://download.docker.com/linux/fedora/docker-ce.repo
      keys:
        - https://pkg.cloudflareclient.com/pubkey.gpg
        - https://download.docker.com/linux/fedora/gpg
    install:
      packages:
        - beep
        - cloudflare-warp
        - docker-ce
        # uCore packages from normal edition, without all the bloat
        - cockpit-storaged
        - duperemove
        - hdparm
        - man-db
        - pciutils
        - pcp-zeroconf
        - rclone
        - samba
        - samba-usershares
        - sanoid
        - smartctl
        - snapraid
        - usbutils
        - xdg-dbus-proxy
        - xdg-user-dirs
        # uCore HCI
        # - cockpit-machines
        # - libvirt-client
        # - libvirt-daemon-kvm
        # - ublue-os-libvirt-workarounds
        # - virt-install
    remove:
      packages:
        # CoreOS packages
        - moby-engine
        - containerd
        - runc
        - docker-cli
        - nfs-utils-coreos
        # uCore packages
        - docker-buildx
        - docker-compose
        - podman-compose
        - tailscale
        # - wireguard-tools

  - type: signing
